<div class="sidebar-header">
    <span>Recent</span>
</div>
<div class="sidebar-panel-toolbar">
    <button class="panel-btn"
            hx-get="{% url 'notes:add' %}"
            hx-target="#htmx-modal-container"
            title="New Note">
        <i class="icon-square-pen"></i>
    </button>
    <div class="dropdown" x-data="dropdown()">
        <button class="panel-btn"
                type="button"
                x-ref="button"
                @click="toggle()"
                :aria-expanded="open"
                title="Sort notes">
            <i class="icon-arrow-up-down"></i>
        </button>
        <ul class="dropdown-menu" x-ref="menu" x-show="open">
            {% for key, label in sidebar_sort_options %}
                <li>
                    <a class="dropdown-item {% if current_sort == key %}active{% endif %}"
                       href="#"
                       hx-get="{% url 'notes:note-sidebar-sort' note.id key %}"
                       hx-target="#sidebar-list-container">{{ label }}</a>
                </li>
            {% endfor %}
        </ul>
    </div>
</div>
<ul class="sidebar-notes-list">
    {% for n in notes %}
        <li class="{% if n.id == note.id %}active{% endif %}"
            hx-get="{% url 'notes:note-content-partial' n.id %}"
            hx-target="#note-editor-container"
            hx-swap="innerHTML"
            hx-push-url="{% url 'notes:note-view' n.id %}"
            data-note-id="{{ n.id }}">
            {% if n.is_encrypted %}
                <i class="icon-lock"
                   style="font-size:0.8em;
                          opacity:0.5;
                          margin-right:0.25rem"></i>
            {% endif %}
            {{ n.title }}
        </li>
    {% endfor %}
</ul>
