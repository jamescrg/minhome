<div class="modal-header">
    <h1 class="modal-title">{{ action }} Note</h1>
    <button type="button" @click="$dispatch('close-modal')">
        <i class="icon-x"></i>
    </button>
</div>
<div class="modal-body">
    <form id="note-form"
          hx-post="{% if note %}{% url 'notes:edit' note.id %}{% else %}{% url 'notes:add' %}{% endif %}"
          hx-target="#htmx-modal-container">
        {% csrf_token %}
        {{ form }}
        {% if folders_flat %}
            <div class="form-group">
                <label for="id_folder">Folder</label>
                <div>
                    <select name="folder" id="id_folder">
                        <option value="">---------</option>
                        {% for item in folders_flat %}
                            <option value="{{ item.folder.id }}"
                                    {% if form.instance.folder_id == item.folder.id %}selected{% endif %}>
                                {{ item.indent }}{{ item.folder.name }}
                            </option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        {% endif %}
    </form>
</div>
<div class="modal-footer">
    {% if note %}
        <button type="button"
                class="btn btn-danger"
                hx-confirm="Are you sure you want to delete this note?"
                hx-post="{% url 'notes:delete' note.id %}"
                hx-target="#htmx-modal-container">Delete</button>
    {% else %}
        <button type="button"
                class="btn btn-secondary"
                @click="$dispatch('close-modal')">Cancel</button>
    {% endif %}
    <button type="submit" form="note-form" class="btn btn-primary">Submit</button>
</div>
