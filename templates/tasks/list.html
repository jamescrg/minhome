{% include "tasks/taskform.html" %}
<ul class="list-group tasks-list">
    {% for task in tasks %}
        <li class="list-group-item tasks-row">
            <div class="tasks-checkbox">
                <a href="#"
                   hx-post="{% url 'tasks-status' task.id %}"
                   hx-target="#tasks-container"
                   hx-swap="innerHTML">
                    {% if task.status == 1 %}
                        <i class="icon-circle-check-big"></i>
                    {% else %}
                        <i class="icon-circle"></i>
                    {% endif %}
                </a>
            </div>
            <div class="tasks-content">
                <div class="tasks-title">
                    <a class="{% if task.status == 1 %}text-completed{% endif %}"
                       href="#"
                       hx-get="{% url 'tasks-form' task.id %}"
                       hx-target="#htmx-modal-container">{{ task.title }}</a>
                </div>
                {% if task.due_date %}
                    <div class="tasks-due">
                        {{ task.due_date|date:"M j" }}
                        {% if task.due_time %}{{ task.due_time|time:"g:i A" }}{% endif %}
                    </div>
                {% endif %}
            </div>
            {% if task.parent_task %}
                <div class="tasks-recurring">
                    <i class="icon-refresh-cw"></i>
                </div>
            {% endif %}
        </li>
    {% endfor %}
</ul>
{% include "pagination.html" %}
<div class="archive">
    <button class="btn btn-secondary"
            hx-post="{% url 'tasks-clear-htmx' %}"
            hx-target="#tasks-container"
            hx-swap="innerHTML">
        <i class="icon-archive"></i> Archive Completed Tasks
    </button>
</div>
